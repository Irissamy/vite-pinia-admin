import{_,o as i,c as n,a as t,F as h,r as u,t as d,w as g,j as b,b as m}from"./index-783050ea.js";const f={data(){return{orderList:[],pagination:{}}},methods:{getOrderList(a=1){const l=`https://vue3-course-api.hexschool.io/api/iris-lai-api/admin/orders/?page=${a}`;this.$http.get(l).then(s=>{s.data.success?this.orderList=s.data.orders:console.log(s.data.messages)})},deleteOrder(a){const l=`https://vue3-course-api.hexschool.io/api/iris-lai-api/admin/order/${a}`;this.$http.delete(l).then(s=>{s.data.success?this.getOrderList():console.log(s.data.message)})},changeOrder(a){const l=`https://vue3-course-api.hexschool.io/api/iris-lai-api/admin/order/${a}`,s=this.orderList.find(r=>r.id===a);this.$http.put(l,{data:s}).then(r=>{r.data.success?this.getOrderList():console.log(r.data.message)})}},created(){this.getOrderList()}},$={class:"table mt-4"},k=t("thead",null,[t("tr",null,[t("th",null,"購買時間"),t("th",null,"Email"),t("th",null,"購買款項"),t("th",null,"應付金額"),t("th",null,"是否付款"),t("th",null,"編輯")])],-1),v={class:"list-unstyled"},x={class:"text-right"},y={class:"form-check form-switch"},L=["onUpdate:modelValue","onChange"],O={class:"form-check-label"},w={key:0},C={key:1},V={class:"btn-group"},B=t("button",{class:"btn btn-outline-primary btn-sm"},"檢視",-1),D=["onClick"];function E(a,l,s,r,p,c){return i(),n("table",$,[k,t("tbody",null,[(i(!0),n(h,null,u(p.orderList,e=>(i(),n("tr",{key:e.id},[t("td",null,d(e.create_at),1),t("td",null,d(e.user.email),1),t("td",null,[t("ul",v,[(i(!0),n(h,null,u(e.products,o=>(i(),n("li",{key:o.id},d(o.product.title)+" / 數量："+d(o.product.num),1))),128))])]),t("td",x,d(e.total),1),t("td",null,[t("div",y,[g(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o=>e.is_paid=o,onChange:o=>c.changeOrder(e.id)},null,40,L),[[b,e.is_paid]]),t("label",O,[e.is_paid?(i(),n("span",w,"已付款")):(i(),n("span",C,"未付款"))])])]),t("td",null,[t("div",V,[B,t("button",{class:"btn btn-outline-danger btn-sm",onClick:m(o=>c.deleteOrder(e.id),["prevent"])},"刪除",8,D)])])]))),128))])])}const M=_(f,[["render",E]]);export{M as default};
