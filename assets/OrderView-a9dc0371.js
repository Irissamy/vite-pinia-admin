import{c as g}from"./filterFn-431caa88.js";import{_ as m,l as f,o as i,c as n,n as b,a as t,F as h,r as p,t as c,w as v,h as L,b as y}from"./index-675a0c31.js";const k={data(){return{currency:g,isLoading:!1,orderList:[],pagination:{}}},methods:{getOrderList(a=1){const l=`https://vue3-course-api.hexschool.io/api/iris-lai-api/admin/orders/?page=${a}`;this.isLoading=!0,this.$http.get(l).then(s=>{s.data.success?(this.orderList=s.data.orders,this.isLoading=!1):console.log(s.data.messages)})},deleteOrder(a){const l=`https://vue3-course-api.hexschool.io/api/iris-lai-api/admin/order/${a}`;this.$http.delete(l).then(s=>{s.data.success?this.getOrderList():console.log(s.data.message)})},changeOrder(a){const l=`https://vue3-course-api.hexschool.io/api/iris-lai-api/admin/order/${a}`,s=this.orderList.find(r=>r.id===a);this.$http.put(l,{data:s}).then(r=>{r.data.success?this.getOrderList():console.log(r.data.message)})}},created(){this.getOrderList()}},$={class:"table mt-4"},O=t("thead",null,[t("tr",null,[t("th",null,"購買時間"),t("th",null,"Email"),t("th",null,"購買款項"),t("th",null,"應付金額"),t("th",null,"是否付款"),t("th",null,"編輯")])],-1),x={class:"list-unstyled"},C={class:"text-right"},w={class:"form-check form-switch"},V=["onUpdate:modelValue","onChange"],B={class:"form-check-label"},D={key:0},E={key:1},F={class:"btn-group"},M=t("button",{class:"btn btn-outline-primary btn-sm"},"檢視",-1),N=["onClick"];function U(a,l,s,r,d,u){const _=f("LoadingOverlay");return i(),n(h,null,[b(_,{active:d.isLoading},null,8,["active"]),t("table",$,[O,t("tbody",null,[(i(!0),n(h,null,p(d.orderList,e=>(i(),n("tr",{key:e.id},[t("td",null,c(e.create_at),1),t("td",null,c(e.user.email),1),t("td",null,[t("ul",x,[(i(!0),n(h,null,p(e.products,o=>(i(),n("li",{key:o.id},c(o.product.title)+" / 數量："+c(o.qty),1))),128))])]),t("td",C,c(d.currency(e.total)),1),t("td",null,[t("div",w,[v(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o=>e.is_paid=o,onChange:o=>u.changeOrder(e.id)},null,40,V),[[L,e.is_paid]]),t("label",B,[e.is_paid?(i(),n("span",D,"已付款")):(i(),n("span",E,"未付款"))])])]),t("td",null,[t("div",F,[M,t("button",{class:"btn btn-outline-danger btn-sm",onClick:y(o=>u.deleteOrder(e.id),["prevent"])},"刪除",8,N)])])]))),128))])])],64)}const j=m(k,[["render",U]]);export{j as default};
